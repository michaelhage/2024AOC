package hagem.aoc2024.day13;

import hagem.utils.Reader;
import org.junit.jupiter.api.DynamicTest;
import org.junit.jupiter.api.TestFactory;

import java.io.File;
import java.util.List;
import java.util.Objects;
import java.util.concurrent.atomic.AtomicInteger;
import java.util.stream.Stream;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.DynamicTest.dynamicTest;

public class Day13Test {

    File file = new File(Objects.requireNonNull(getClass().getResource("/day13/Day13.data.txt")).getFile());
    File pythonFile = new File(Objects.requireNonNull(getClass().getResource("/day13/cramer.py")).getFile());

    @TestFactory
    Stream<DynamicTest> testDay11() {

        List<String> data = Reader.readFile(file);
        Day13 day13 = new Day13();

        List<Day13.Crane> craneList = day13.parseData(data);

        AtomicInteger i = new AtomicInteger();

        return craneList.stream().map(crane -> {

            long expected = solutions[i.getAndIncrement()];
            long actual = day13.evaluateCrane(crane);

            return dynamicTest("Attempt: " + i, () -> {
                   assertEquals(actual, expected);
                });
        });

    }

   long[] solutions = new long[]{
           213,
           276,
           279,
           0,
           128,
           0,
           0,
           0,
           0,
           335,
           115,
           139,
           103,
           0,
           0,
           167,
           0,
           0,
           257,
           213,
           257,
           0,
           0,
           0,
           224,
           311,
           0,
           0,
           340,
           143,
           0,
           0,
           0,
           189,
           283,
           0,
           0,
           0,
           120,
           0,
           0,
           0,
           0,
           0,
           94,
           137,
           0,
           0,
           182,
           338,
           149,
           0,
           0,
           0,
           285,
           300,
           0,
           322,
           320,
           196,
           0,
           0,
           181,
           248,
           0,
           155,
           257,
           180,
           336,
           247,
           214,
           0,
           368,
           0,
           233,
           0,
           0,
           250,
           305,
           0,
           0,
           0,
           112,
           0,
           246,
           129,
           255,
           293,
           0,
           0,
           309,
           0,
           0,
           0,
           0,
           343,
           202,
           0,
           0,
           319,
           0,
           0,
           128,
           0,
           118,
           0,
           280,
           0,
           206,
           209,
           0,
           0,
           0,
           0,
           0,
           126,
           118,
           203,
           308,
           0,
           237,
           0,
           84,
           0,
           0,
           28,
           0,
           82,
           118,
           162,
           148,
           0,
           282,
           0,
           0,
           129,
           302,
           0,
           283,
           96,
           308,
           0,
           0,
           0,
           0,
           0,
           187,
           182,
           55,
           0,
           88,
           0,
           0,
           0,
           0,
           32,
           306,
           0,
           246,
           0,
           0,
           0,
           292,
           381,
           0,
           0,
           295,
           0,
           43,
           79,
           155,
           0,
           0,
           0,
           174,
           0,
           0,
           0,
           283,
           59,
           0,
           198,
           168,
           120,
           0,
           372,
           0,
           168,
           0,
           0,
           347,
           0,
           0,
           0,
           354,
           84,
           0,
           308,
           0,
           0,
           297,
           138,
           0,
           241,
           136,
           180,
           0,
           0,
           0,
           0,
           0,
           0,
           205,
           271,
           292,
           0,
           0,
           230,
           282,
           0,
           280,
           325,
           258,
           0,
           0,
           0,
           190,
           313,
           156,
           0,
           0,
           246,
           0,
           257,
           0,
           295,
           0,
           0,
           0,
           0,
           223,
           272,
           263,
           0,
           96,
           91,
           98,
           0,
           0,
           0,
           0,
           0,
           280,
           160,
           107,
           0,
           289,
           285,
           0,
           0,
           0,
           347,
           207,
           179,
           264,
           0,
           163,
           84,
           0,
           0,
           142,
           252,
           304,
           36,
           149,
           0,
           0,
           262,
           0,
           0,
           275,
           217,
           0,
           311,
           0,
           0,
           210,
           98,
           0,
           124,
           0,
           0,
           282,
           243,
           62,
           0,
           0,
           0,
           270,
           0,
           377,
           261,
           351,
           91,
           0,
           0,
           263,
           269,
           236,
           0,
           85,
           234,
           349,
           167,
           167,
           0,
           85,
           234,
           140,
           181
   };

}
